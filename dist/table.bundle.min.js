var AjaxTable=function(){"use strict";function e(e,t,n){function s(n,s){var i;Object.defineProperty(n,"_zod",{value:n._zod??{},enumerable:!1}),(i=n._zod).traits??(i.traits=new Set),n._zod.traits.add(e),t(n,s);for(const e in o.prototype)e in n||Object.defineProperty(n,e,{value:o.prototype[e].bind(n)});n._zod.constr=o,n._zod.def=s}const i=n?.Parent??Object;class a extends i{}function o(e){var t;const i=n?.Parent?new a:this;s(i,e),(t=i._zod).deferred??(t.deferred=[]);for(const e of i._zod.deferred)e();return i}return Object.defineProperty(a,"name",{value:e}),Object.defineProperty(o,"init",{value:s}),Object.defineProperty(o,Symbol.hasInstance,{value:t=>!!(n?.Parent&&t instanceof n.Parent)||t?._zod?.traits?.has(e)}),Object.defineProperty(o,"name",{value:e}),o}class t extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const n={};function s(e){return n}function i(e,t){return"bigint"==typeof t?t.toString():t}function a(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}const o=Symbol("evaluating");function r(e,t,n){let s;Object.defineProperty(e,t,{get(){if(s!==o)return void 0===s&&(s=o,s=n()),s},set(n){Object.defineProperty(e,t,{value:n})},configurable:!0})}function c(e){return JSON.stringify(e)}const l="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function u(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}const p=a(()=>{if("undefined"!=typeof navigator&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return new Function(""),!0}catch(e){return!1}});const h=new Set(["string","number","symbol"]);function d(e,t=0){for(let n=t;n<e.issues.length;n++)if(!0!==e.issues[n]?.continue)return!0;return!1}function f(e,t){return t.map(t=>{var n;return(n=t).path??(n.path=[]),t.path.unshift(e),t})}function g(e){return"string"==typeof e?e:e?.message}function _(e,t,n){const s={...e,path:e.path??[]};if(!e.message){const i=g(e.inst?._zod.def?.error?.(e))??g(t?.error?.(e))??g(n.customError?.(e))??g(n.localeError?.(e))??"Invalid input";s.message=i}return delete s.inst,delete s.continue,t?.reportInput||delete s.input,s}const m=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,i,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},v=e("$ZodError",m),y=e("$ZodError",m,{Parent:Error}),b=(e=>(n,i,a,o)=>{const r=a?Object.assign(a,{async:!1}):{async:!1},c=n._zod.run({value:i,issues:[]},r);if(c instanceof Promise)throw new t;if(c.issues.length){const t=new(o?.Err??e)(c.issues.map(e=>_(e,r,s())));throw l(t,o?.callee),t}return c.value})(y),z=(e=>async(t,n,i,a)=>{const o=i?Object.assign(i,{async:!0}):{async:!0};let r=t._zod.run({value:n,issues:[]},o);if(r instanceof Promise&&(r=await r),r.issues.length){const t=new(a?.Err??e)(r.issues.map(e=>_(e,o,s())));throw l(t,a?.callee),t}return r.value})(y),w=(e=>(n,i,a)=>{const o=a?{...a,async:!1}:{async:!1},r=n._zod.run({value:i,issues:[]},o);if(r instanceof Promise)throw new t;return r.issues.length?{success:!1,error:new(e??v)(r.issues.map(e=>_(e,o,s())))}:{success:!0,data:r.value}})(y),N=(e=>async(t,n,i)=>{const a=i?Object.assign(i,{async:!0}):{async:!0};let o=t._zod.run({value:n,issues:[]},a);return o instanceof Promise&&(o=await o),o.issues.length?{success:!1,error:new e(o.issues.map(e=>_(e,a,s())))}:{success:!0,data:o.value}})(y),S=/^-?\d+(?:\.\d+)?/i,T=/true|false/i;class C{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if("function"==typeof e)return e(this,{execution:"sync"}),void e(this,{execution:"async"});const t=e.split("\n").filter(e=>e),n=Math.min(...t.map(e=>e.length-e.trimStart().length)),s=t.map(e=>e.slice(n)).map(e=>" ".repeat(2*this.indent)+e);for(const e of s)this.content.push(e)}compile(){const e=Function,t=this?.args;return new e(...t,[...(this?.content??[""]).map(e=>`  ${e}`)].join("\n"))}}const P={major:4,minor:0,patch:14},E=e("$ZodType",(e,n)=>{var s;e??(e={}),e._zod.def=n,e._zod.bag=e._zod.bag||{},e._zod.version=P;const i=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&i.unshift(e);for(const t of i)for(const n of t._zod.onattach)n(e);if(0===i.length)(s=e._zod).deferred??(s.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const n=(e,n,s)=>{let i,a=d(e);for(const o of n){if(o._zod.def.when){if(!o._zod.def.when(e))continue}else if(a)continue;const n=e.issues.length,r=o._zod.check(e);if(r instanceof Promise&&!1===s?.async)throw new t;if(i||r instanceof Promise)i=(i??Promise.resolve()).then(async()=>{await r;e.issues.length!==n&&(a||(a=d(e,n)))});else{if(e.issues.length===n)continue;a||(a=d(e,n))}}return i?i.then(()=>e):e};e._zod.run=(s,a)=>{const o=e._zod.parse(s,a);if(o instanceof Promise){if(!1===a.async)throw new t;return o.then(e=>n(e,i,a))}return n(o,i,a)}}e["~standard"]={validate:t=>{try{const n=w(e,t);return n.success?{value:n.data}:{issues:n.error?.issues}}catch(n){return N(e,t).then(e=>e.success?{value:e.data}:{issues:e.error?.issues})}},vendor:"zod",version:1}}),j=e("$ZodString",(e,t)=>{var n;E.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??(n=e._zod.bag,new RegExp(`^${n?`[\\s\\S]{${n?.minimum??0},${n?.maximum??""}}`:"[\\s\\S]*"}$`)),e._zod.parse=(n,s)=>{if(t.coerce)try{n.value=String(n.value)}catch(s){}return"string"==typeof n.value||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:e}),n}}),$=e("$ZodNumber",(e,t)=>{E.init(e,t),e._zod.pattern=e._zod.bag.pattern??S,e._zod.parse=(n,s)=>{if(t.coerce)try{n.value=Number(n.value)}catch(e){}const i=n.value;if("number"==typeof i&&!Number.isNaN(i)&&Number.isFinite(i))return n;const a="number"==typeof i?Number.isNaN(i)?"NaN":Number.isFinite(i)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:i,inst:e,...a?{received:a}:{}}),n}}),x=e("$ZodBoolean",(e,t)=>{E.init(e,t),e._zod.pattern=T,e._zod.parse=(n,s)=>{if(t.coerce)try{n.value=Boolean(n.value)}catch(e){}const i=n.value;return"boolean"==typeof i||n.issues.push({expected:"boolean",code:"invalid_type",input:i,inst:e}),n}});function L(e,t,n){e.issues.length&&t.issues.push(...f(n,e.issues)),t.value[n]=e.value}const M=e("$ZodArray",(e,t)=>{E.init(e,t),e._zod.parse=(n,s)=>{const i=n.value;if(!Array.isArray(i))return n.issues.push({expected:"array",code:"invalid_type",input:i,inst:e}),n;n.value=Array(i.length);const a=[];for(let e=0;e<i.length;e++){const o=i[e],r=t.element._zod.run({value:o,issues:[]},s);r instanceof Promise?a.push(r.then(t=>L(t,n,e))):L(r,n,e)}return a.length?Promise.all(a).then(()=>n):n}});function k(e,t,n,s){e.issues.length&&t.issues.push(...f(n,e.issues)),void 0===e.value?n in s&&(t.value[n]=void 0):t.value[n]=e.value}const O=e("$ZodObject",(e,t)=>{E.init(e,t);const s=a(()=>{const e=Object.keys(t.shape);for(const n of e)if(!(t.shape[n]instanceof E))throw new Error(`Invalid element at key "${n}": expected a Zod schema`);const n=(s=t.shape,Object.keys(s).filter(e=>"optional"===s[e]._zod.optin&&"optional"===s[e]._zod.optout));var s;return{shape:t.shape,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(n)}});r(e._zod,"propValues",()=>{const e=t.shape,n={};for(const t in e){const s=e[t]._zod;if(s.values){n[t]??(n[t]=new Set);for(const e of s.values)n[t].add(e)}}return n});let i;const o=u,l=!n.jitless,h=l&&p.value,d=t.catchall;let f;e._zod.parse=(n,a)=>{f??(f=s.value);const r=n.value;if(!o(r))return n.issues.push({expected:"object",code:"invalid_type",input:r,inst:e}),n;const u=[];if(l&&h&&!1===a?.async&&!0!==a.jitless)i||(i=(e=>{const t=new C(["shape","payload","ctx"]),n=s.value,i=e=>{const t=c(e);return`shape[${t}]._zod.run({ value: input[${t}], issues: [] }, ctx)`};t.write("const input = payload.value;");const a=Object.create(null);let o=0;for(const e of n.keys)a[e]="key_"+o++;t.write("const newResult = {}");for(const e of n.keys){const n=a[e],s=c(e);t.write(`const ${n} = ${i(e)};`),t.write(`\n        if (${n}.issues.length) {\n          payload.issues = payload.issues.concat(${n}.issues.map(iss => ({\n            ...iss,\n            path: iss.path ? [${s}, ...iss.path] : [${s}]\n          })));\n        }\n        \n        if (${n}.value === undefined) {\n          if (${s} in input) {\n            newResult[${s}] = undefined;\n          }\n        } else {\n          newResult[${s}] = ${n}.value;\n        }\n      `)}t.write("payload.value = newResult;"),t.write("return payload;");const r=t.compile();return(t,n)=>r(e,t,n)})(t.shape)),n=i(n,a);else{n.value={};const e=f.shape;for(const t of f.keys){const s=e[t]._zod.run({value:r[t],issues:[]},a);s instanceof Promise?u.push(s.then(e=>k(e,n,t,r))):k(s,n,t,r)}}if(!d)return u.length?Promise.all(u).then(()=>n):n;const p=[],g=f.keySet,_=d._zod,m=_.def.type;for(const e of Object.keys(r)){if(g.has(e))continue;if("never"===m){p.push(e);continue}const t=_.run({value:r[e],issues:[]},a);t instanceof Promise?u.push(t.then(t=>k(t,n,e,r))):k(t,n,e,r)}return p.length&&n.issues.push({code:"unrecognized_keys",keys:p,input:r,inst:e}),u.length?Promise.all(u).then(()=>n):n}}),H=e("$ZodRecord",(e,t)=>{E.init(e,t),e._zod.parse=(n,i)=>{const a=n.value;if(!function(e){if(!1===u(e))return!1;const t=e.constructor;if(void 0===t)return!0;const n=t.prototype;return!1!==u(n)&&!1!==Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")}(a))return n.issues.push({expected:"record",code:"invalid_type",input:a,inst:e}),n;const o=[];if(t.keyType._zod.values){const s=t.keyType._zod.values;n.value={};for(const e of s)if("string"==typeof e||"number"==typeof e||"symbol"==typeof e){const s=t.valueType._zod.run({value:a[e],issues:[]},i);s instanceof Promise?o.push(s.then(t=>{t.issues.length&&n.issues.push(...f(e,t.issues)),n.value[e]=t.value})):(s.issues.length&&n.issues.push(...f(e,s.issues)),n.value[e]=s.value)}let r;for(const e in a)s.has(e)||(r=r??[],r.push(e));r&&r.length>0&&n.issues.push({code:"unrecognized_keys",input:a,inst:e,keys:r})}else{n.value={};for(const r of Reflect.ownKeys(a)){if("__proto__"===r)continue;const c=t.keyType._zod.run({value:r,issues:[]},i);if(c instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(c.issues.length){n.issues.push({code:"invalid_key",origin:"record",issues:c.issues.map(e=>_(e,i,s())),input:r,path:[r],inst:e}),n.value[c.value]=c.value;continue}const l=t.valueType._zod.run({value:a[r],issues:[]},i);l instanceof Promise?o.push(l.then(e=>{e.issues.length&&n.issues.push(...f(r,e.issues)),n.value[c.value]=e.value})):(l.issues.length&&n.issues.push(...f(r,l.issues)),n.value[c.value]=l.value)}}return o.length?Promise.all(o).then(()=>n):n}}),R=e("$ZodEnum",(e,t)=>{E.init(e,t);const n=function(e){const t=Object.values(e).filter(e=>"number"==typeof e);return Object.entries(e).filter(([e,n])=>-1===t.indexOf(+e)).map(([e,t])=>t)}(t.entries),s=new Set(n);e._zod.values=s,e._zod.pattern=new RegExp(`^(${n.filter(e=>h.has(typeof e)).map(e=>"string"==typeof e?e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"):e.toString()).join("|")})$`),e._zod.parse=(t,i)=>{const a=t.value;return s.has(a)||t.issues.push({code:"invalid_value",values:n,input:a,inst:e}),t}});function Z(e,t){return e.issues.length&&void 0===t?{issues:[],value:void 0}:e}const D=e("$ZodOptional",(e,t)=>{E.init(e,t),e._zod.optin="optional",e._zod.optout="optional",r(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),r(e._zod,"pattern",()=>{const e=t.innerType._zod.pattern;return e?new RegExp(`^(${function(e){const t=e.startsWith("^")?1:0,n=e.endsWith("$")?e.length-1:e.length;return e.slice(t,n)}(e.source)})?$`):void 0}),e._zod.parse=(e,n)=>{if("optional"===t.innerType._zod.optin){const s=t.innerType._zod.run(e,n);return s instanceof Promise?s.then(t=>Z(t,e.value)):Z(s,e.value)}return void 0===e.value?e:t.innerType._zod.run(e,n)}}),A=e("$ZodDefault",(e,t)=>{E.init(e,t),e._zod.optin="optional",r(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,n)=>{if(void 0===e.value)return e.value=t.defaultValue,e;const s=t.innerType._zod.run(e,n);return s instanceof Promise?s.then(e=>B(e,t)):B(s,t)}});function B(e,t){return void 0===e.value&&(e.value=t.defaultValue),e}const U=e("ZodMiniType",(e,t)=>{if(!e._zod)throw new Error("Uninitialized schema in ZodMiniType.");E.init(e,t),e.def=t,e.parse=(t,n)=>b(e,t,n,{callee:e.parse}),e.safeParse=(t,n)=>w(e,t,n),e.parseAsync=async(t,n)=>z(e,t,n,{callee:e.parseAsync}),e.safeParseAsync=async(t,n)=>N(e,t,n),e.check=(...n)=>e.clone({...t,checks:[...t.checks??[],...n.map(e=>"function"==typeof e?{_zod:{check:e,def:{check:"custom"},onattach:[]}}:e)]}),e.clone=(t,n)=>function(e,t,n){const s=new e._zod.constr(t??e._zod.def);return t&&!n?.parent||(s._zod.parent=e),s}(e,t,n),e.brand=()=>e,e.register=(t,n)=>(t.add(e,n),e)}),q=e("ZodMiniString",(e,t)=>{j.init(e,t),U.init(e,t)});function F(e){return new q({type:"string"})}const I=e("ZodMiniNumber",(e,t)=>{$.init(e,t),U.init(e,t)});function V(e){return new I({type:"number",checks:[]})}const G=e("ZodMiniBoolean",(e,t)=>{x.init(e,t),U.init(e,t)});function J(e){return new G({type:"boolean"})}const K=e("ZodMiniArray",(e,t)=>{M.init(e,t),U.init(e,t)});function W(e,t){return new K({type:"array",element:e})}const X=e("ZodMiniObject",(e,t)=>{O.init(e,t),U.init(e,t),r(e,"shape",()=>t.shape)});function Q(e,t){return new X({type:"object",get shape(){var t,n,s;return t=this,n="shape",s={...e},Object.defineProperty(t,n,{value:s,writable:!0,enumerable:!0,configurable:!0}),this.shape}})}const Y=e("ZodMiniRecord",(e,t)=>{H.init(e,t),U.init(e,t)});const ee=e("ZodMiniEnum",(e,t)=>{R.init(e,t),U.init(e,t)});function te(e,t){const n=Array.isArray(e)?Object.fromEntries(e.map(e=>[e,e])):e;return new ee({type:"enum",entries:n})}const ne=e("ZodMiniOptional",(e,t)=>{D.init(e,t),U.init(e,t)});function se(e){return new ne({type:"optional",innerType:e})}const ie=e("ZodMiniDefault",(e,t)=>{A.init(e,t),U.init(e,t)});function ae(e,t){return new ie({type:"default",innerType:e,get defaultValue(){return"function"==typeof t?t():t}})}const oe=Q({name:F(),type:te(["text","html"]),label:F(),className:se(F()),sortable:J()}),re=Q({ajaxURL:F(),ajaxMethod:ae(te(["GET","POST"]),"GET"),ajaxHeaders:ae((ce=F(),le=F(),new Y({type:"record",keyType:ce,valueType:le})),{"Content-Type":"application/json","X-Requested-By":"ajax-table"}),debug:ae(J(),!1),columns:W(oe),classNames:se(Q({container:se(F()),table:se(Q({table:se(F()),tableHead:Q({tableHead:se(F()),tableRow:se(F()),tableCell:se(F())}),tableBody:Q({tableBody:se(F()),tableRow:se(F()),tableCell:se(F())}),placeholder:se(F())})),footerContainer:se(F()),pagination:se(Q({container:se(F()),button:se(Q({base:se(F()),active:se(F()),ellipsis:se(F()),previous:se(F()),next:se(F())})),sizeSelector:Q({container:se(F()),select:se(F()),option:se(F())})}))})),placeholderHTML:ae(F(),"No data available.."),pagination:se(Q({active:ae(J(),!1),pageSize:ae(V(),30),availableSizes:ae(W(V()),[10,30,50,100]),style:ae(te(["standard","simple"]),"standard"),elements:se(Q({previousButtonHTML:se(F()),nextButtonHTML:se(F()),ellipsisHTML:se(F())}))}))});var ce,le;function ue(e,t={}){const n=document.createElement(e);return Object.entries(t).forEach(([e,t])=>{null!=t&&(e in n?n[e]=t:n.setAttribute(e,String(t)))}),n}class pe{constructor(){this._handlers={}}register(e,t,n=1e3){this._handlers[e]||(this._handlers[e]=[]),this._handlers[e].push({callback:t,priority:n})}dispatch(e,t){this._handlers[e]?.sort((e,t)=>e.priority-t.priority).forEach(e=>{e.callback(t)})}}const he=Q({total:V(),total_filtered:V(),pagination:Q({page:V(),page_size:V(),total_pages:V()}),data:W(W(Q({column:F(),className:se(F()),value:F()})))});class de{constructor(e,t){this._sort=null,this._pagination=null,this._config=e,this._eventDispatcher=t}refresh(){this._config.debug&&console.info("Refreshing data..");const e=this.generateRequest();this._eventDispatcher.dispatch("before-data-refresh",e),fetch(e).then(e=>{e.ok&&e.json().then(e=>{const t=he.parse(e);this._eventDispatcher.dispatch("data-refresh",t),this._eventDispatcher.dispatch("after-data-refresh")}).catch(e=>{this._config.debug&&console.error(e),this._eventDispatcher.dispatch("data-refresh-error",{error:e}),this._eventDispatcher.dispatch("after-data-refresh")})}).catch(e=>{this._config.debug&&console.error(e),this._eventDispatcher.dispatch("data-refresh-error",{error:e}),this._eventDispatcher.dispatch("after-data-refresh")})}get sort(){return this._sort}set sort(e){this._sort=e}get pagination(){return this._pagination}set pagination(e){this._pagination=e}generateRequest(){const e="GET"===this._config.ajaxMethod?this._config.ajaxURL+"?"+this.generateURLSearchParams():this._config.ajaxURL,t="POST"===this._config.ajaxMethod?JSON.stringify(this.generateRequestBody()):null;return new Request(e,{method:this._config.ajaxMethod,headers:this._config.ajaxHeaders,body:t})}generateRequestBody(){return{pagination:this._pagination,sort:this._sort}}generateURLSearchParams(){let e=new URLSearchParams;return null!==this._pagination&&(e.append("pagination-page",this._pagination.page.toString()),e.append("pagination-size",this._pagination.pageSize.toString())),null!==this._sort&&(e.append("sort-column",this._sort.column.name),e.append("sort-direction",this._sort.direction)),e}}class fe{constructor(e,t,n,s){this._config=t,this._coreElement=e,this._eventDispatcher=n,this._client=s}}class ge extends fe{constructor(e,t,n,s){super(e,t,n,s),this._isLoading=!1,this._sort=null,this._elements={table:null,head:null,body:null},this._eventDispatcher.register("before-data-refresh",()=>this._isLoading=!0),this._eventDispatcher.register("data-refresh",e=>this.render(e)),this._eventDispatcher.register("after-data-refresh",()=>this._isLoading=!1),this.init()}init(){this._coreElement.innerHTML="",this._elements.table=ue("table",{className:this._config.classNames?.table?.table}),this._elements.head=ue("thead",{className:this._config.classNames?.table?.tableHead.tableHead}),this._elements.body=ue("tbody",{className:this._config.classNames?.table?.tableBody.tableBody});const e=ue("tr",{className:this._config.classNames?.table?.tableHead.tableRow});this._config.columns.forEach(t=>{const n=ue("th",{scope:"col",className:t.className||this._config.classNames?.table?.tableHead.tableCell,innerHTML:t.label});t.sortable&&n.addEventListener("click",()=>{this._isLoading||(this._config.debug&&console.info(`[Table Component] Sort by column: ${t.name}`),null===this._sort?this._sort={column:t,direction:"ASC"}:this._sort.column.name===t.name?this._sort.direction="ASC"===this._sort.direction?"DESC":"ASC":this._sort={column:t,direction:"ASC"},this._client.sort=this._sort,this._client.refresh())}),e.appendChild(n)}),this._elements.head.appendChild(e),this._elements.table.appendChild(this._elements.head),this._elements.table.appendChild(this._elements.body),this._coreElement.appendChild(this._elements.table)}render(e){if(this._config.debug&&console.info("[Table Component] Rendering data.."),null===this._elements.body)throw new Error("[Table Component] Body element couldn't be found. First, initialize the component with the init() method.");if(this._elements.body.innerHTML="",0===e.data.length&&void 0!==this._config.placeholderHTML&&null!==this._config.placeholderHTML&&""!==this._config.placeholderHTML){const e=ue("tr",{className:this._config.classNames?.table?.tableBody.tableCell}),t=ue("td",{colSpan:this._config.columns.length,className:this._config.classNames?.table?.placeholder||this._config.classNames?.table?.tableBody.tableCell,innerHTML:this._config.placeholderHTML});e.appendChild(t),this._elements.body?.appendChild(e)}else e.data.forEach(e=>{const t=ue("tr",{className:this._config.classNames?.table?.tableBody.tableRow});this._config.columns.forEach(n=>{const s=e.find(function(e){return e.column===n.name});if(void 0===s)throw new Error(`[Table Component] Column ${n.name} not found`);const i=ue("td",{className:s.className||this._config.classNames?.table?.tableBody.tableCell});"text"===n.type?i.innerText=s.value:"html"===n.type&&(i.innerHTML=s.value),t.appendChild(i)}),this._elements.body?.appendChild(t)})}}class _e extends fe{constructor(e,t,n,s){super(e,t,n,s),this._isLoading=!1,this._elements={container:null,sizeContainer:null,sizeSelect:null},this._eventDispatcher.register("before-data-refresh",()=>this._isLoading=!0),this._eventDispatcher.register("data-refresh",e=>this.render(e)),this._eventDispatcher.register("after-data-refresh",()=>this._isLoading=!1),this.init()}init(){this._coreElement.innerHTML="",this._elements.container=ue("nav",{className:this._config.classNames?.pagination?.container,ariaLabel:"Pagination"}),this._elements.sizeContainer=ue("div",{className:this._config.classNames?.pagination?.sizeSelector?.container});const e=ue("select",{name:"at-size-selector",className:this._config.classNames?.pagination?.sizeSelector?.select});this._config.pagination?.availableSizes?.forEach(t=>{const n=ue("option",{value:t,innerText:t.toString(),selected:t===this._client.pagination?.pageSize?"selected":null});e.appendChild(n)}),e.addEventListener("change",()=>{this._isLoading||(this._config.debug&&console.info(`[Pagination Component] Changing page size to ${e.value}`),this._client.pagination={page:1,pageSize:parseInt(e.value)},this._client.refresh())}),this._elements.sizeContainer.appendChild(e),this._coreElement.appendChild(this._elements.sizeContainer),this._coreElement.appendChild(this._elements.container)}render(e){if(null===this._elements.container)throw new Error("[Pagination Component] Container element couldn't be found. First, initialize the component with the init() method.");this._elements.container.innerText="";const t=ue("button",{className:this._config.classNames?.pagination?.button?.previous||this._config.classNames?.pagination?.button?.base,innerHTML:this._config.pagination?.elements?.previousButtonHTML||"",disabled:1===e.pagination.page?"disabled":null,type:"button"});t.addEventListener("click",()=>{this._isLoading||e.pagination.page>1&&(this._config.debug&&console.info("[Pagination Component] Moving to previous page"),this._client.pagination={page:e.pagination.page-1,pageSize:e.pagination.page_size},this._client.refresh())});const n=ue("button",{className:this._config.classNames?.pagination?.button?.next||this._config.classNames?.pagination?.button?.base,innerHTML:this._config.pagination?.elements?.nextButtonHTML||"",disabled:e.pagination.page===e.pagination.total_pages?"disabled":null,type:"button"});if(n.addEventListener("click",()=>{this._isLoading||e.pagination.page<e.pagination.total_pages&&(this._config.debug&&console.info("[Pagination Component] Moving to next page"),this._client.pagination={page:e.pagination.page+1,pageSize:e.pagination.page_size},this._client.refresh())}),this._elements.container?.appendChild(t),"simple"!==this._config.pagination?.style){const t=(t,n=!1)=>{const s=ue("button",{className:n&&this._config.classNames?.pagination?.button?.active||this._config.classNames?.pagination?.button?.base,innerText:t.toString(),type:"button"});return s.addEventListener("click",()=>{this._isLoading||(this._config.debug&&console.info(`[Pagination Component] Moving to ${t} page`),this._client.pagination={page:t,pageSize:e.pagination.page_size},this._client.refresh())}),s},n=()=>ue("span",{className:this._config.classNames?.pagination?.button?.ellipsis||this._config.classNames?.pagination?.button?.base,innerHTML:this._config.pagination?.elements?.ellipsisHTML||"..."}),s=t(1,1===e.pagination.page);this._elements.container?.appendChild(s),e.pagination.page>4&&this._elements.container?.appendChild(n());for(let n=Math.max(2,e.pagination.page-2);n<=Math.min(e.pagination.page+2,e.pagination.total_pages-1);n++){const s=t(n,n===e.pagination.page);this._elements.container?.appendChild(s)}if(e.pagination.page<e.pagination.total_pages-3&&this._elements.container?.appendChild(n()),e.pagination.total_pages>1){const n=t(e.pagination.total_pages,e.pagination.total_pages===e.pagination.page);this._elements.container?.appendChild(n)}}this._elements.container?.appendChild(n)}}return class{constructor(e,t){if(this._components={table:null,pagination:null},this._config=this.validateConfig(t),this._coreElement=document.querySelector(e),!this._coreElement)throw new Error("Container element couldn't be found.");const n=ue("div",{className:this._config.classNames?.container}),s=ue("div",{className:this._config.classNames?.footerContainer});this._coreElement.innerHTML="",this._coreElement.appendChild(n),this._coreElement.appendChild(s),this._eventDispatcher=new pe,this._client=new de(this._config,this._eventDispatcher),this._components.table=new ge(n,this._config,this._eventDispatcher,this._client),!0===this._config.pagination?.active&&(this._client.pagination={page:1,pageSize:this._config.pagination.pageSize},this._components.pagination=new _e(s,this._config,this._eventDispatcher,this._client))}on(e,t){this._eventDispatcher.register(e,t,1e3)}refreshData(){this._client.refresh()}validateConfig(e){const t=re.safeParse(e);if(t.success)return t.data;throw new Error(`Exception while config validation: ${t.error.message}`)}}}();
