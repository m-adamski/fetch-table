var AjaxTable=function(){"use strict";function e(e,t,n){function s(n,s){var i;Object.defineProperty(n,"_zod",{value:n._zod??{},enumerable:!1}),(i=n._zod).traits??(i.traits=new Set),n._zod.traits.add(e),t(n,s);for(const e in o.prototype)e in n||Object.defineProperty(n,e,{value:o.prototype[e].bind(n)});n._zod.constr=o,n._zod.def=s}const i=n?.Parent??Object;class a extends i{}function o(e){var t;const i=n?.Parent?new a:this;s(i,e),(t=i._zod).deferred??(t.deferred=[]);for(const e of i._zod.deferred)e();return i}return Object.defineProperty(a,"name",{value:e}),Object.defineProperty(o,"init",{value:s}),Object.defineProperty(o,Symbol.hasInstance,{value:t=>!!(n?.Parent&&t instanceof n.Parent)||t?._zod?.traits?.has(e)}),Object.defineProperty(o,"name",{value:e}),o}class t extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const n={};function s(e){return n}function i(e,t){return"bigint"==typeof t?t.toString():t}function a(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}const o=Symbol("evaluating");function r(e,t,n){let s;Object.defineProperty(e,t,{get(){if(s!==o)return void 0===s&&(s=o,s=n()),s},set(n){Object.defineProperty(e,t,{value:n})},configurable:!0})}function l(e){return JSON.stringify(e)}const c="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function u(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}const h=a(()=>{if("undefined"!=typeof navigator&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return new Function(""),!0}catch(e){return!1}});const p=new Set(["string","number","symbol"]);function d(e,t=0){for(let n=t;n<e.issues.length;n++)if(!0!==e.issues[n]?.continue)return!0;return!1}function g(e,t){return t.map(t=>{var n;return(n=t).path??(n.path=[]),t.path.unshift(e),t})}function f(e){return"string"==typeof e?e:e?.message}function m(e,t,n){const s={...e,path:e.path??[]};if(!e.message){const i=f(e.inst?._zod.def?.error?.(e))??f(t?.error?.(e))??f(n.customError?.(e))??f(n.localeError?.(e))??"Invalid input";s.message=i}return delete s.inst,delete s.continue,t?.reportInput||delete s.input,s}const _=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,i,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},b=e("$ZodError",_),v=e("$ZodError",_,{Parent:Error}),y=(e=>(n,i,a,o)=>{const r=a?Object.assign(a,{async:!1}):{async:!1},l=n._zod.run({value:i,issues:[]},r);if(l instanceof Promise)throw new t;if(l.issues.length){const t=new(o?.Err??e)(l.issues.map(e=>m(e,r,s())));throw c(t,o?.callee),t}return l.value})(v),z=(e=>async(t,n,i,a)=>{const o=i?Object.assign(i,{async:!0}):{async:!0};let r=t._zod.run({value:n,issues:[]},o);if(r instanceof Promise&&(r=await r),r.issues.length){const t=new(a?.Err??e)(r.issues.map(e=>m(e,o,s())));throw c(t,a?.callee),t}return r.value})(v),w=(e=>(n,i,a)=>{const o=a?{...a,async:!1}:{async:!1},r=n._zod.run({value:i,issues:[]},o);if(r instanceof Promise)throw new t;return r.issues.length?{success:!1,error:new(e??b)(r.issues.map(e=>m(e,o,s())))}:{success:!0,data:r.value}})(v),N=(e=>async(t,n,i)=>{const a=i?Object.assign(i,{async:!0}):{async:!0};let o=t._zod.run({value:n,issues:[]},a);return o instanceof Promise&&(o=await o),o.issues.length?{success:!1,error:new e(o.issues.map(e=>m(e,a,s())))}:{success:!0,data:o.value}})(v),S=/^-?\d+(?:\.\d+)?/i,E=/true|false/i;class C{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if("function"==typeof e)return e(this,{execution:"sync"}),void e(this,{execution:"async"});const t=e.split("\n").filter(e=>e),n=Math.min(...t.map(e=>e.length-e.trimStart().length)),s=t.map(e=>e.slice(n)).map(e=>" ".repeat(2*this.indent)+e);for(const e of s)this.content.push(e)}compile(){const e=Function,t=this?.args;return new e(...t,[...(this?.content??[""]).map(e=>`  ${e}`)].join("\n"))}}const T={major:4,minor:0,patch:14},P=e("$ZodType",(e,n)=>{var s;e??(e={}),e._zod.def=n,e._zod.bag=e._zod.bag||{},e._zod.version=T;const i=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&i.unshift(e);for(const t of i)for(const n of t._zod.onattach)n(e);if(0===i.length)(s=e._zod).deferred??(s.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const n=(e,n,s)=>{let i,a=d(e);for(const o of n){if(o._zod.def.when){if(!o._zod.def.when(e))continue}else if(a)continue;const n=e.issues.length,r=o._zod.check(e);if(r instanceof Promise&&!1===s?.async)throw new t;if(i||r instanceof Promise)i=(i??Promise.resolve()).then(async()=>{await r;e.issues.length!==n&&(a||(a=d(e,n)))});else{if(e.issues.length===n)continue;a||(a=d(e,n))}}return i?i.then(()=>e):e};e._zod.run=(s,a)=>{const o=e._zod.parse(s,a);if(o instanceof Promise){if(!1===a.async)throw new t;return o.then(e=>n(e,i,a))}return n(o,i,a)}}e["~standard"]={validate:t=>{try{const n=w(e,t);return n.success?{value:n.data}:{issues:n.error?.issues}}catch(n){return N(e,t).then(e=>e.success?{value:e.data}:{issues:e.error?.issues})}},vendor:"zod",version:1}}),j=e("$ZodString",(e,t)=>{var n;P.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??(n=e._zod.bag,new RegExp(`^${n?`[\\s\\S]{${n?.minimum??0},${n?.maximum??""}}`:"[\\s\\S]*"}$`)),e._zod.parse=(n,s)=>{if(t.coerce)try{n.value=String(n.value)}catch(s){}return"string"==typeof n.value||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:e}),n}}),L=e("$ZodNumber",(e,t)=>{P.init(e,t),e._zod.pattern=e._zod.bag.pattern??S,e._zod.parse=(n,s)=>{if(t.coerce)try{n.value=Number(n.value)}catch(e){}const i=n.value;if("number"==typeof i&&!Number.isNaN(i)&&Number.isFinite(i))return n;const a="number"==typeof i?Number.isNaN(i)?"NaN":Number.isFinite(i)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:i,inst:e,...a?{received:a}:{}}),n}}),x=e("$ZodBoolean",(e,t)=>{P.init(e,t),e._zod.pattern=E,e._zod.parse=(n,s)=>{if(t.coerce)try{n.value=Boolean(n.value)}catch(e){}const i=n.value;return"boolean"==typeof i||n.issues.push({expected:"boolean",code:"invalid_type",input:i,inst:e}),n}});function $(e,t,n){e.issues.length&&t.issues.push(...g(n,e.issues)),t.value[n]=e.value}const k=e("$ZodArray",(e,t)=>{P.init(e,t),e._zod.parse=(n,s)=>{const i=n.value;if(!Array.isArray(i))return n.issues.push({expected:"array",code:"invalid_type",input:i,inst:e}),n;n.value=Array(i.length);const a=[];for(let e=0;e<i.length;e++){const o=i[e],r=t.element._zod.run({value:o,issues:[]},s);r instanceof Promise?a.push(r.then(t=>$(t,n,e))):$(r,n,e)}return a.length?Promise.all(a).then(()=>n):n}});function M(e,t,n,s){e.issues.length&&t.issues.push(...g(n,e.issues)),void 0===e.value?n in s&&(t.value[n]=void 0):t.value[n]=e.value}const O=e("$ZodObject",(e,t)=>{P.init(e,t);const s=a(()=>{const e=Object.keys(t.shape);for(const n of e)if(!(t.shape[n]instanceof P))throw new Error(`Invalid element at key "${n}": expected a Zod schema`);const n=(s=t.shape,Object.keys(s).filter(e=>"optional"===s[e]._zod.optin&&"optional"===s[e]._zod.optout));var s;return{shape:t.shape,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(n)}});r(e._zod,"propValues",()=>{const e=t.shape,n={};for(const t in e){const s=e[t]._zod;if(s.values){n[t]??(n[t]=new Set);for(const e of s.values)n[t].add(e)}}return n});let i;const o=u,c=!n.jitless,p=c&&h.value,d=t.catchall;let g;e._zod.parse=(n,a)=>{g??(g=s.value);const r=n.value;if(!o(r))return n.issues.push({expected:"object",code:"invalid_type",input:r,inst:e}),n;const u=[];if(c&&p&&!1===a?.async&&!0!==a.jitless)i||(i=(e=>{const t=new C(["shape","payload","ctx"]),n=s.value,i=e=>{const t=l(e);return`shape[${t}]._zod.run({ value: input[${t}], issues: [] }, ctx)`};t.write("const input = payload.value;");const a=Object.create(null);let o=0;for(const e of n.keys)a[e]="key_"+o++;t.write("const newResult = {}");for(const e of n.keys){const n=a[e],s=l(e);t.write(`const ${n} = ${i(e)};`),t.write(`\n        if (${n}.issues.length) {\n          payload.issues = payload.issues.concat(${n}.issues.map(iss => ({\n            ...iss,\n            path: iss.path ? [${s}, ...iss.path] : [${s}]\n          })));\n        }\n        \n        if (${n}.value === undefined) {\n          if (${s} in input) {\n            newResult[${s}] = undefined;\n          }\n        } else {\n          newResult[${s}] = ${n}.value;\n        }\n      `)}t.write("payload.value = newResult;"),t.write("return payload;");const r=t.compile();return(t,n)=>r(e,t,n)})(t.shape)),n=i(n,a);else{n.value={};const e=g.shape;for(const t of g.keys){const s=e[t]._zod.run({value:r[t],issues:[]},a);s instanceof Promise?u.push(s.then(e=>M(e,n,t,r))):M(s,n,t,r)}}if(!d)return u.length?Promise.all(u).then(()=>n):n;const h=[],f=g.keySet,m=d._zod,_=m.def.type;for(const e of Object.keys(r)){if(f.has(e))continue;if("never"===_){h.push(e);continue}const t=m.run({value:r[e],issues:[]},a);t instanceof Promise?u.push(t.then(t=>M(t,n,e,r))):M(t,n,e,r)}return h.length&&n.issues.push({code:"unrecognized_keys",keys:h,input:r,inst:e}),u.length?Promise.all(u).then(()=>n):n}}),R=e("$ZodRecord",(e,t)=>{P.init(e,t),e._zod.parse=(n,i)=>{const a=n.value;if(!function(e){if(!1===u(e))return!1;const t=e.constructor;if(void 0===t)return!0;const n=t.prototype;return!1!==u(n)&&!1!==Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")}(a))return n.issues.push({expected:"record",code:"invalid_type",input:a,inst:e}),n;const o=[];if(t.keyType._zod.values){const s=t.keyType._zod.values;n.value={};for(const e of s)if("string"==typeof e||"number"==typeof e||"symbol"==typeof e){const s=t.valueType._zod.run({value:a[e],issues:[]},i);s instanceof Promise?o.push(s.then(t=>{t.issues.length&&n.issues.push(...g(e,t.issues)),n.value[e]=t.value})):(s.issues.length&&n.issues.push(...g(e,s.issues)),n.value[e]=s.value)}let r;for(const e in a)s.has(e)||(r=r??[],r.push(e));r&&r.length>0&&n.issues.push({code:"unrecognized_keys",input:a,inst:e,keys:r})}else{n.value={};for(const r of Reflect.ownKeys(a)){if("__proto__"===r)continue;const l=t.keyType._zod.run({value:r,issues:[]},i);if(l instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(l.issues.length){n.issues.push({code:"invalid_key",origin:"record",issues:l.issues.map(e=>m(e,i,s())),input:r,path:[r],inst:e}),n.value[l.value]=l.value;continue}const c=t.valueType._zod.run({value:a[r],issues:[]},i);c instanceof Promise?o.push(c.then(e=>{e.issues.length&&n.issues.push(...g(r,e.issues)),n.value[l.value]=e.value})):(c.issues.length&&n.issues.push(...g(r,c.issues)),n.value[l.value]=c.value)}}return o.length?Promise.all(o).then(()=>n):n}}),H=e("$ZodEnum",(e,t)=>{P.init(e,t);const n=function(e){const t=Object.values(e).filter(e=>"number"==typeof e);return Object.entries(e).filter(([e,n])=>-1===t.indexOf(+e)).map(([e,t])=>t)}(t.entries),s=new Set(n);e._zod.values=s,e._zod.pattern=new RegExp(`^(${n.filter(e=>p.has(typeof e)).map(e=>"string"==typeof e?e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"):e.toString()).join("|")})$`),e._zod.parse=(t,i)=>{const a=t.value;return s.has(a)||t.issues.push({code:"invalid_value",values:n,input:a,inst:e}),t}});function D(e,t){return e.issues.length&&void 0===t?{issues:[],value:void 0}:e}const Z=e("$ZodOptional",(e,t)=>{P.init(e,t),e._zod.optin="optional",e._zod.optout="optional",r(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),r(e._zod,"pattern",()=>{const e=t.innerType._zod.pattern;return e?new RegExp(`^(${function(e){const t=e.startsWith("^")?1:0,n=e.endsWith("$")?e.length-1:e.length;return e.slice(t,n)}(e.source)})?$`):void 0}),e._zod.parse=(e,n)=>{if("optional"===t.innerType._zod.optin){const s=t.innerType._zod.run(e,n);return s instanceof Promise?s.then(t=>D(t,e.value)):D(s,e.value)}return void 0===e.value?e:t.innerType._zod.run(e,n)}}),A=e("$ZodDefault",(e,t)=>{P.init(e,t),e._zod.optin="optional",r(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,n)=>{if(void 0===e.value)return e.value=t.defaultValue,e;const s=t.innerType._zod.run(e,n);return s instanceof Promise?s.then(e=>B(e,t)):B(s,t)}});function B(e,t){return void 0===e.value&&(e.value=t.defaultValue),e}const q=e("ZodMiniType",(e,t)=>{if(!e._zod)throw new Error("Uninitialized schema in ZodMiniType.");P.init(e,t),e.def=t,e.parse=(t,n)=>y(e,t,n,{callee:e.parse}),e.safeParse=(t,n)=>w(e,t,n),e.parseAsync=async(t,n)=>z(e,t,n,{callee:e.parseAsync}),e.safeParseAsync=async(t,n)=>N(e,t,n),e.check=(...n)=>e.clone({...t,checks:[...t.checks??[],...n.map(e=>"function"==typeof e?{_zod:{check:e,def:{check:"custom"},onattach:[]}}:e)]}),e.clone=(t,n)=>function(e,t,n){const s=new e._zod.constr(t??e._zod.def);return t&&!n?.parent||(s._zod.parent=e),s}(e,t,n),e.brand=()=>e,e.register=(t,n)=>(t.add(e,n),e)}),U=e("ZodMiniString",(e,t)=>{j.init(e,t),q.init(e,t)});function F(e){return new U({type:"string"})}const I=e("ZodMiniNumber",(e,t)=>{L.init(e,t),q.init(e,t)});function V(e){return new I({type:"number",checks:[]})}const G=e("ZodMiniBoolean",(e,t)=>{x.init(e,t),q.init(e,t)});function J(e){return new G({type:"boolean"})}const K=e("ZodMiniArray",(e,t)=>{k.init(e,t),q.init(e,t)});function W(e,t){return new K({type:"array",element:e})}const X=e("ZodMiniObject",(e,t)=>{O.init(e,t),q.init(e,t),r(e,"shape",()=>t.shape)});function Q(e,t){return new X({type:"object",get shape(){var t,n,s;return t=this,n="shape",s={...e},Object.defineProperty(t,n,{value:s,writable:!0,enumerable:!0,configurable:!0}),this.shape}})}const Y=e("ZodMiniRecord",(e,t)=>{R.init(e,t),q.init(e,t)});function ee(e,t,n){return new Y({type:"record",keyType:e,valueType:t})}const te=e("ZodMiniEnum",(e,t)=>{H.init(e,t),q.init(e,t)});function ne(e,t){const n=Array.isArray(e)?Object.fromEntries(e.map(e=>[e,e])):e;return new te({type:"enum",entries:n})}const se=e("ZodMiniOptional",(e,t)=>{Z.init(e,t),q.init(e,t)});function ie(e){return new se({type:"optional",innerType:e})}const ae=e("ZodMiniDefault",(e,t)=>{A.init(e,t),q.init(e,t)});function oe(e,t){return new ae({type:"default",innerType:e,get defaultValue(){return"function"==typeof t?t():t}})}const re=Q({name:F(),type:ne(["text","html"]),label:F(),className:ie(F()),sortable:J(),searchable:J()}),le=Q({ajaxURL:F(),ajaxMethod:oe(ne(["GET","POST"]),"GET"),ajaxHeaders:oe(ee(F(),F()),{"Content-Type":"application/json","X-Requested-By":"ajax-table"}),debug:oe(J(),!1),columns:W(re),elements:ie(Q({container:ie(Q({container:ie(Q({className:ie(F()),querySelector:ie(F()),attributes:ie(ee(F(),F()))})),header:ie(Q({className:ie(F()),querySelector:ie(F()),attributes:ie(ee(F(),F()))})),footer:ie(Q({className:ie(F()),querySelector:ie(F()),attributes:ie(ee(F(),F()))}))})),table:ie(Q({table:ie(Q({className:ie(F()),attributes:ie(ee(F(),F()))})),tableHead:ie(Q({tableHead:ie(Q({className:ie(F()),attributes:ie(ee(F(),F()))})),tableRow:ie(Q({className:ie(F()),attributes:ie(ee(F(),F()))})),tableCell:ie(Q({className:ie(F()),attributes:ie(ee(F(),F()))}))})),tableBody:ie(Q({tableBody:ie(Q({className:ie(F()),attributes:ie(ee(F(),F()))})),tableRow:ie(Q({className:ie(F()),attributes:ie(ee(F(),F()))})),tableCell:ie(Q({className:ie(F()),attributes:ie(ee(F(),F()))}))})),placeholder:ie(Q({className:ie(F()),innerHTML:ie(F()),attributes:ie(ee(F(),F()))}))})),pagination:ie(Q({container:ie(Q({className:ie(F()),attributes:ie(ee(F(),F()))})),button:ie(Q({primary:ie(Q({className:ie(F()),attributes:ie(ee(F(),F()))})),active:ie(Q({className:ie(F()),attributes:ie(ee(F(),F()))})),ellipsis:ie(Q({className:ie(F()),innerHTML:ie(F()),attributes:ie(ee(F(),F()))})),previous:ie(Q({className:ie(F()),innerHTML:ie(F()),attributes:ie(ee(F(),F()))})),next:ie(Q({className:ie(F()),innerHTML:ie(F()),attributes:ie(ee(F(),F()))}))})),sizeSelector:ie(Q({container:ie(Q({className:ie(F()),attributes:ie(ee(F(),F()))})),select:ie(Q({className:ie(F()),attributes:ie(ee(F(),F()))})),option:ie(Q({className:ie(F()),attributes:ie(ee(F(),F()))}))}))})),search:ie(Q({container:ie(Q({className:ie(F()),attributes:ie(ee(F(),F()))})),input:ie(Q({className:ie(F()),attributes:ie(ee(F(),F()))}))}))})),components:ie(Q({pagination:ie(Q({active:oe(J(),!1),pageSize:oe(V(),25),availableSizes:oe(W(V()),[10,25,50,100]),style:oe(ne(["standard","simple"]),"standard")}))}))});function ce(e,t={}){const n=document.createElement(e);return Object.entries(t).forEach(([e,t])=>{null!=t&&("attributes"===e?Object.entries(t).forEach(([e,t])=>{n.setAttribute(e,String(t))}):e in n?n[e]=t:n.setAttribute(e,String(t)))}),n}class ue{constructor(){this._handlers={}}register(e,t,n=1e3){this._handlers[e]||(this._handlers[e]=[]),this._handlers[e].push({callback:t,priority:n})}dispatch(e,t){this._handlers[e]?.sort((e,t)=>e.priority-t.priority).forEach(e=>{e.callback(t)})}}const he=Q({total:V(),total_filtered:V(),pagination:Q({page:V(),page_size:V(),total_pages:V()}),data:W(W(Q({column:F(),className:ie(F()),value:F()})))});class pe{constructor(e,t){this._sort=null,this._pagination=null,this._search=null,this._config=e,this._eventDispatcher=t}refresh(){this._config.debug&&console.info("Refreshing data..");const e=this.generateRequest();this._eventDispatcher.dispatch("before-data-refresh",e),fetch(e).then(e=>{e.ok&&e.json().then(e=>{const t=he.parse(e);this._eventDispatcher.dispatch("data-refresh",t),this._eventDispatcher.dispatch("after-data-refresh")}).catch(e=>{this._config.debug&&console.error(e),this._eventDispatcher.dispatch("data-refresh-error",{error:e}),this._eventDispatcher.dispatch("after-data-refresh")})}).catch(e=>{this._config.debug&&console.error(e),this._eventDispatcher.dispatch("data-refresh-error",{error:e}),this._eventDispatcher.dispatch("after-data-refresh")})}get sort(){return this._sort}set sort(e){this._sort=e}get pagination(){return this._pagination}set pagination(e){this._pagination=e}get search(){return this._search}set search(e){this._search=e}generateRequest(){const e="GET"===this._config.ajaxMethod?this._config.ajaxURL+"?"+this.generateURLSearchParams():this._config.ajaxURL,t="POST"===this._config.ajaxMethod?JSON.stringify(this.generateRequestBody()):null;return new Request(e,{method:this._config.ajaxMethod,headers:this._config.ajaxHeaders,body:t})}generateRequestBody(){return{sort:this._sort,search:this._search,pagination:this._pagination}}generateURLSearchParams(){let e=new URLSearchParams;return null!==this._search&&e.append("search",this._search),null!==this._pagination&&(e.append("pagination-page",this._pagination.page.toString()),e.append("pagination-size",this._pagination.pageSize.toString())),null!==this._sort&&(e.append("sort-column",this._sort.column.name),e.append("sort-direction",this._sort.direction)),e}}class de{constructor(e,t,n,s){this._config=t,this._coreElement=e,this._eventDispatcher=n,this._client=s}}class ge extends de{constructor(e,t,n,s){super(e,t,n,s),this._isLoading=!1,this._sort=null,this._elements={table:null,head:null,body:null},this._eventDispatcher.register("before-data-refresh",()=>this._isLoading=!0),this._eventDispatcher.register("data-refresh",e=>this.render(e)),this._eventDispatcher.register("after-data-refresh",()=>this._isLoading=!1),this.init()}init(){this._coreElement.innerHTML="",this._elements.table=ce("table",{className:this._config.elements?.table?.table?.className,attributes:this._config.elements?.table?.table?.attributes}),this._elements.head=ce("thead",{className:this._config.elements?.table?.tableHead?.tableHead?.className,attributes:this._config.elements?.table?.tableHead?.tableHead?.attributes}),this._elements.body=ce("tbody",{className:this._config.elements?.table?.tableBody?.tableBody?.className,attributes:this._config.elements?.table?.tableBody?.tableBody?.attributes});const e=ce("tr",{className:this._config.elements?.table?.tableHead?.tableRow?.className,attributes:this._config.elements?.table?.tableHead?.tableRow?.attributes});this._config.columns.forEach(t=>{const n=ce("th",{scope:"col",className:t.className||this._config.elements?.table?.tableHead?.tableCell?.className,attributes:this._config.elements?.table?.tableHead?.tableCell?.attributes,innerHTML:t.label});t.sortable&&n.addEventListener("click",()=>{this._isLoading||(this._config.debug&&console.info(`[Table Component] Sort by column: ${t.name}`),null===this._sort?this._sort={column:t,direction:"ASC"}:this._sort.column.name===t.name?this._sort.direction="ASC"===this._sort.direction?"DESC":"ASC":this._sort={column:t,direction:"ASC"},this._client.sort=this._sort,this._client.refresh())}),e.appendChild(n)}),this._elements.head.appendChild(e),this._elements.table.appendChild(this._elements.head),this._elements.table.appendChild(this._elements.body),this._coreElement.appendChild(this._elements.table)}render(e){if(this._config.debug&&console.info("[Table Component] Rendering data.."),null===this._elements.body)throw new Error("[Table Component] Body element couldn't be found. First, initialize the component with the init() method.");if(this._elements.body.innerHTML="",0===e.data.length){const e=ce("tr",{className:this._config.elements?.table?.tableBody?.tableRow?.className,attributes:this._config.elements?.table?.tableBody?.tableRow?.attributes}),t=ce("td",{colSpan:this._config.columns.length,className:this._config.elements?.table?.placeholder?.className||this._config.elements?.table?.tableBody?.tableCell?.className,attributes:this._config.elements?.table?.placeholder?.attributes,innerHTML:this._config.elements?.table?.placeholder?.innerHTML});e.appendChild(t),this._elements.body?.appendChild(e)}else e.data.forEach(e=>{const t=ce("tr",{className:this._config.elements?.table?.tableBody?.tableRow?.className,attributes:this._config.elements?.table?.tableBody?.tableRow?.attributes});this._config.columns.forEach(n=>{const s=e.find(function(e){return e.column===n.name});if(void 0===s)throw new Error(`[Table Component] Column ${n.name} not found`);const i=ce("td",{className:s.className||this._config.elements?.table?.tableBody?.tableCell?.className,attributes:this._config.elements?.table?.tableBody?.tableCell?.attributes});"text"===n.type?i.innerText=s.value:"html"===n.type&&(i.innerHTML=s.value),t.appendChild(i)}),this._elements.body?.appendChild(t)})}}class fe extends de{constructor(e,t,n,s){super(e,t,n,s),this._isLoading=!1,this._elements={container:null,sizeContainer:null,sizeSelect:null},this._eventDispatcher.register("before-data-refresh",()=>this._isLoading=!0),this._eventDispatcher.register("data-refresh",e=>this.render(e)),this._eventDispatcher.register("after-data-refresh",()=>this._isLoading=!1),this.init()}init(){this._coreElement.innerHTML="",this._elements.container=ce("nav",{className:this._config.elements?.pagination?.container?.className,attributes:this._config.elements?.pagination?.container?.attributes,ariaLabel:"Pagination"}),this._elements.sizeContainer=ce("div",{className:this._config.elements?.pagination?.sizeSelector?.container?.className,attributes:this._config.elements?.pagination?.sizeSelector?.container?.attributes});const e=ce("select",{name:"at-size-selector",className:this._config.elements?.pagination?.sizeSelector?.select?.className,attributes:this._config.elements?.pagination?.sizeSelector?.select?.attributes});this._config.components?.pagination?.availableSizes?.forEach(t=>{const n=ce("option",{value:t,innerText:t.toString(),selected:t===this._client.pagination?.pageSize?"selected":null});e.appendChild(n)}),e.addEventListener("change",()=>{this._isLoading||(this._config.debug&&console.info(`[Pagination Component] Changing page size to ${e.value}`),this._client.pagination={page:1,pageSize:parseInt(e.value)},this._client.refresh())}),this._elements.sizeContainer.appendChild(e),this._coreElement.appendChild(this._elements.sizeContainer),this._coreElement.appendChild(this._elements.container)}render(e){if(null===this._elements.container)throw new Error("[Pagination Component] Container element couldn't be found. First, initialize the component with the init() method.");this._elements.container.innerText="";const t=ce("button",{className:this._config.elements?.pagination?.button?.previous?.className||this._config.elements?.pagination?.button?.primary?.className,attributes:this._config.elements?.pagination?.button?.previous?.attributes,innerHTML:this._config.elements?.pagination?.button?.previous?.innerHTML,disabled:1===e.pagination.page?"disabled":null,type:"button"});t.addEventListener("click",()=>{this._isLoading||e.pagination.page>1&&(this._config.debug&&console.info("[Pagination Component] Moving to previous page"),this._client.pagination={page:e.pagination.page-1,pageSize:e.pagination.page_size},this._client.refresh())});const n=ce("button",{type:"button",className:this._config.elements?.pagination?.button?.next?.className||this._config.elements?.pagination?.button?.primary?.className,attributes:this._config.elements?.pagination?.button?.next?.attributes,innerHTML:this._config.elements?.pagination?.button?.next?.innerHTML,disabled:e.pagination.page===e.pagination.total_pages?"disabled":null});if(n.addEventListener("click",()=>{this._isLoading||e.pagination.page<e.pagination.total_pages&&(this._config.debug&&console.info("[Pagination Component] Moving to next page"),this._client.pagination={page:e.pagination.page+1,pageSize:e.pagination.page_size},this._client.refresh())}),this._elements.container?.appendChild(t),"simple"!==this._config.components?.pagination?.style){const t=(t,n=!1)=>{const s=ce("button",{className:n&&this._config.elements?.pagination?.button?.active?.className||this._config.elements?.pagination?.button?.primary?.className,attributes:this._config.elements?.pagination?.button?.active?.attributes,innerText:t.toString(),type:"button"});return s.addEventListener("click",()=>{this._isLoading||(this._config.debug&&console.info(`[Pagination Component] Moving to ${t} page`),this._client.pagination={page:t,pageSize:e.pagination.page_size},this._client.refresh())}),s},n=()=>ce("span",{className:this._config.elements?.pagination?.button?.ellipsis?.className||this._config.elements?.pagination?.button?.primary?.className,attributes:this._config.elements?.pagination?.button?.previous?.attributes,innerHTML:this._config.elements?.pagination?.button?.ellipsis?.innerHTML||".."}),s=t(1,1===e.pagination.page);if(this._elements.container?.appendChild(s),e.pagination.page>4&&this._elements.container?.appendChild(n()),e.pagination.page<5)for(let n=2;n<=Math.min(5,e.pagination.total_pages-1);n++){const s=t(n,n===e.pagination.page);this._elements.container?.appendChild(s)}else if(e.pagination.page>e.pagination.total_pages-4)for(let n=Math.max(e.pagination.total_pages-4,2);n<=e.pagination.total_pages-1;n++){const s=t(n,n===e.pagination.page);this._elements.container?.appendChild(s)}else for(let n=e.pagination.page-1;n<=e.pagination.page+1;n++){const s=t(n,n===e.pagination.page);this._elements.container?.appendChild(s)}if(e.pagination.page<=e.pagination.total_pages-4&&this._elements.container?.appendChild(n()),e.pagination.total_pages>1){const n=t(e.pagination.total_pages,e.pagination.total_pages===e.pagination.page);this._elements.container?.appendChild(n)}}this._elements.container?.appendChild(n)}}class me extends de{constructor(e,t,n,s){super(e,t,n,s),this._isLoading=!1,this._eventDispatcher.register("before-data-refresh",()=>this._isLoading=!0),this._eventDispatcher.register("after-data-refresh",()=>this._isLoading=!1),this.init()}init(){this._coreElement.innerHTML="";const e=ce("div",{className:this._config.elements?.search?.container?.className,attributes:this._config.elements?.search?.container?.attributes}),t=ce("input",{type:"text",name:"at-search-input",className:this._config.elements?.search?.input?.className,attributes:this._config.elements?.search?.input?.attributes});let n=null;t.addEventListener("keyup",()=>{this._isLoading||(clearTimeout(n),n=setTimeout(()=>{this._config.debug&&console.info(`[Search Component] Searching for ${t.value}`),this._client.search=t.value,this._client.refresh()},500))}),e.appendChild(t),this._coreElement.appendChild(e)}}return class{constructor(e,t){if(this._components={table:null,pagination:null,search:null},this._config=this.validateConfig(t),this._coreElement=document.querySelector(e),!this._coreElement)throw new Error("Container element couldn't be found.");this._coreElement.innerHTML="";let n=this.selectElement(this._config.elements?.container?.header?.querySelector);null===n&&(n=ce("div",{className:this._config.elements?.container?.header?.className,attributes:this._config.elements?.container?.header?.attributes}),this._coreElement.appendChild(n));let s=this.selectElement(this._config.elements?.container?.container?.querySelector);null===s&&(s=ce("div",{className:this._config.elements?.container?.container?.className,attributes:this._config.elements?.container?.container?.attributes}),this._coreElement.appendChild(s));let i=this.selectElement(this._config.elements?.container?.footer?.querySelector);null===i&&(i=ce("div",{className:this._config.elements?.container?.footer?.className,attributes:this._config.elements?.container?.footer?.attributes}),this._coreElement.appendChild(i)),this._eventDispatcher=new ue,this._client=new pe(this._config,this._eventDispatcher),this._components.search=new me(n,this._config,this._eventDispatcher,this._client),this._components.table=new ge(s,this._config,this._eventDispatcher,this._client),!0===this._config.components?.pagination?.active&&(this._client.pagination={page:1,pageSize:this._config.components.pagination.pageSize},this._components.pagination=new fe(i,this._config,this._eventDispatcher,this._client))}on(e,t){this._eventDispatcher.register(e,t,1e3)}refreshData(){this._client.refresh()}validateConfig(e){const t=le.safeParse(e);if(t.success)return t.data;throw new Error(`Exception while config validation: ${t.error.message}`)}selectElement(e){return console.log(e),null!=e&&""!==e?document.querySelector(e):null}}}();
